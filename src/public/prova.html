<html>
    <body>
        <form id="postForm">
            <input type="text" name="nome" placeholder="Nome"><br>
            <input type="text" name="cognome" placeholder="Cognome"><br>
            <input type="date" name="data_nascita" placeholder="Data di Nascita"><br>
            <input type="text" name="luogo_nascita" placeholder="Luogo di Nascita"><br>
            <input type="text" name="telefono" placeholder="Telefono"><br>
            <input type="text" name="via_residenza" placeholder="Via di Residenza"><br>
            <input type="text" name="citta_residenza" placeholder="Città di Residenza"><br>
            <input type="text" name="cap_residenza" placeholder="CAP di Residenza"><br>
            <input type="text" name="id_tutore1" placeholder="id_tutore"><br>
            <button type="submit">Invia</button>
        </form>
        <script>
          document.getElementById('postForm').addEventListener('submit', function (e) {
            e.preventDefault();
    
            // Prendi i dati del form in modo generico
            const form = e.target;
            const formData = new FormData(form);
            const data = {};
    
            formData.forEach((value, key) => {
              data[key] = value;
            });
    
            fetch('../api/persone', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify(data)
            })
              .then(res => res.text())
              .then(data => alert('Risposta: ' + data))
              .catch(err => console.error('Errore:', err));
          });
        </script>
        <br>
        <br>
        <br>
        Chi vuoi modificare: <input type="text" id="id" placeholder="ID persona"><br>
        <form id="putForm">
            <input type="text" name="nome" placeholder="Nome"><br>
            <input type="text" name="cognome" placeholder="Cognome"><br>
            <input type="text" name="telefono" placeholder="Telefono"><br>
            <input type="text" name="via_residenza" placeholder="Via di Residenza"><br>
            <input type="text" name="citta_residenza" placeholder="Città di Residenza"><br>
            <input type="text" name="cap_residenza" placeholder="CAP di Residenza"><br>
            <button type="submit">Invia</button>
        </form>

        <script>
            document.getElementById('putForm').addEventListener('submit', function (e) {
              e.preventDefault();
      
              // Prendi i dati del form in modo generico
              const form = e.target;
              const formData = new FormData(form);
              const data = {};
              const str = '../api/persone/' + document.getElementById('id').value;
      
              formData.forEach((value, key) => 
              {
                if(value != "")
                {
                  data[key] = value;
                }
              });
              fetch(str, {
                method: 'PUT',
                headers: {
                  'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
              })
                .then(res => res.text())
                .then(data => alert('Risposta: ' + data))
                .catch(err => console.error('Errore:', err));
            });
          </script>
    </body>
</html>